<div class="stops-popup">
  <div class="modal-header">
    <h3>{{title}}</h3>
  </div>
  <div class="modal-body">
    <div class="row">
      <div class="col-lg-12">
        <ui-gmap-google-map center="map.center" zoom="map.zoom" control="map.control" options="map.options" events="map.events">
          <ui-gmap-markers models="allStops" coords="'$latlng'" idKey="'id'" doCluster="true" click="stopClicked" dorebuildall="true" modelsbyref="true" control="map.markersControl">
          </ui-gmap-markers>

          <ui-gmap-marker idkey="'newstop'" coords="selectedStop.$latlng" ng-if="!selectedStop.id" options="map.newStopOptions">
          </ui-gmap-marker>
        </ui-gmap-google-map>
      </div>
    </div>
    <div class="row">
      <div class="col-lg-12">
        <form name="stopForm">
          <div ng-show="selectedStop">
            <h3>
              <span ng-if="!selectedStop.id">New Stop</span>
              <span ng-if="selectedStop.id">{{selectedStop.description}}</span>
            </h3>
            <div class="row">
              <div class="col-lg-4">
                <label>
                  Stop Description:
                  <input type="text" ng-model="selectedStop.description"
                      ng-required
                      >
                </label>
              </div>
              <div class="col-lg-4">
                <label>
                  Stop Road:
                  <input type="text" ng-model="selectedStop.road"
                      ng-required
                  >
                </label>
              </div>
              <div class="col-lg-4">
                <label>
                  Label:
                  <input type="text" ng-model="selectedStop.label"
                      ng-required>
                </label>
              </div>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>
  <div class="modal-footer">
    <div class="row">
      <div class="col-lg-12">
        <span class="btn-group">
            <button class="btn btn-primary"
              ng-disabled="!selectedStop.id"
              ng-click="done()">
              OK
            </button>
            <button class="btn btn-default"
              ng-click="cancel()">
              Cancel
            </button>
          </span>
        <span class="btn-group">
            <button class="btn btn-primary"
              ng-disabled="stopForm.$invalid || stopForm.$pristine"
              ng-click="saveStop(selectedStop)"
              >
              Save Stop
            </button>
            <button class="btn btn-danger"
              ng-show="selectedStop.id"
              ng-click="deleteStop(selectedStop)"
              >
              Delete Stop
            </button>
          </span>
      </div>
    </div>
  </div>
</div>
